<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GWS Admin | Exam Simulator</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a73e8;
            --bg-color: #f8f9fa;
            --surface: #ffffff;
            --text: #202124;
            --text-secondary: #5f6368;
            --success: #188038;
            --error: #d93025;
            --border: #dadce0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-color);
            color: var(--text);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* HEADER */
        header {
            width: 100%;
            background: var(--surface);
            padding: 15px 24px;
            box-shadow: 0 1px 2px 0 rgba(60,64,67,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .logo { font-size: 20px; font-weight: 500; color: var(--text-secondary); display: flex; align-items: center; gap: 10px; }
        .logo span { color: var(--text); }

        /* CONTAINER */
        .container { width: 100%; max-width: 800px; margin-top: 40px; padding: 0 20px; box-sizing: border-box; padding-bottom: 50px; }

        /* CARDS */
        .card {
            background: var(--surface);
            border-radius: 8px;
            border: 1px solid var(--border);
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12);
        }

        h1 { font-size: 28px; font-weight: 400; margin: 0 0 16px 0; }
        h2 { font-size: 22px; font-weight: 400; margin: 0 0 24px 0; }
        p { line-height: 1.5; color: var(--text-secondary); margin-bottom: 20px; }

        /* BUTTONS */
        .action-row { display: flex; gap: 15px; margin-bottom: 30px; flex-wrap: wrap; }
        
        button {
            padding: 12px 24px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
            border: none;
            font-family: 'Roboto', sans-serif;
        }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: #1557b0; box-shadow: 0 1px 2px rgba(60,64,67,0.3); }
        .btn-primary:disabled { background: #dadce0; cursor: not-allowed; box-shadow: none; }

        .btn-outline { background: white; color: var(--primary); border: 1px solid var(--border); }
        .btn-outline:hover { background: #f4f8fe; border-color: var(--primary); }

        /* MODULE GRID */
        .module-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .module-card {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .module-card:hover { border-color: var(--primary); background: #f8fbff; transform: translateY(-2px); box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .module-title { font-weight: 500; color: var(--primary); margin-bottom: 5px; }
        .module-desc { font-size: 12px; color: var(--text-secondary); }

        /* QUIZ UI */
        .option-item {
            display: flex; align-items: center; padding: 12px 16px;
            border: 1px solid var(--border); border-radius: 8px;
            margin-bottom: 12px; cursor: pointer; transition: all 0.2s;
            position: relative;
        }
        .option-item:hover { background-color: #f1f3f4; }
        
        /* Selected State (Blue) */
        .option-item.selected { border-color: var(--primary); background-color: #e8f0fe; color: var(--primary); font-weight: 500; }
        
        /* Correct State (Green) */
        .option-item.correct { border-color: var(--success); background-color: #e6f4ea; color: var(--success); font-weight: 700; }
        
        /* Wrong State (Red) */
        .option-item.wrong { border-color: var(--error); background-color: #fce8e6; color: var(--error); }
        
        /* Missed State (Yellow/Green border) - for correct answers user didn't pick */
        .option-item.missed { border-color: var(--success); border-style: dashed; background-color: #fff; }

        .progress-container { height: 4px; width: 100%; background: #e0e0e0; border-radius: 2px; margin-bottom: 24px; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s ease; }
        
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; text-transform: uppercase; }
        .badge-exam { background: #fce8e6; color: #c5221f; }
        .badge-practice { background: #e6f4ea; color: #137333; }

        .feedback { margin-top: 20px; padding: 16px; background: #f1f3f4; border-left: 4px solid var(--text-secondary); border-radius: 0 4px 4px 0; }
        .hidden { display: none; }
        
        .multi-hint { font-size: 12px; color: #5f6368; font-style: italic; margin-bottom: 10px; display: block; }
    </style>
</head>
<body>

<header>
    <div class="logo">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="#5f6368"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
        <span>Workspace Admin Prep</span>
    </div>
</header>

<div class="container">
    
    <div id="home-screen" class="card">
        <h1>Dashboard</h1>
        <p>Select a mode to begin your study session.</p>
        
        <div class="action-row">
            <button class="btn-primary" style="flex:1; min-width: 200px;" onclick="startQuiz('exam', 'all')">
                <div style="font-size:16px; margin-bottom:4px;">Full Exam Simulator</div>
                <div style="font-weight:400; font-size:12px; opacity:0.9;">50 Questions • No feedback</div>
            </button>
        </div>

        <hr style="border:0; border-top:1px solid #dadce0; margin: 30px 0;">

        <div style="font-weight: 500; color: #5f6368; margin-bottom: 15px;">SELECT A COURSE MODULE</div>
        <div class="module-grid">
            
            <div class="module-card" onclick="startQuiz('practice', 'directory')">
                <div class="module-title">Module 1: User and Resource Management</div>
                <div class="module-desc">Directory, OUs, Groups</div>
            </div>

            <div class="module-card" onclick="startQuiz('practice', 'services')">
                <div class="module-title">Module 2: Core Services</div>
                <div class="module-desc">soon</div>
            </div>
            
        </div>
    </div>

    <div id="quiz-screen" class="card hidden">
        <button class="btn-outline" onclick="goHome()" style="padding: 5px 10px; font-size: 12px; margin-bottom: 15px;">← Back to Dashboard</button>

        <div class="progress-container"><div id="progress-bar" class="progress-bar"></div></div>
        
        <div style="display:flex; justify-content:space-between; margin-bottom:16px;">
            <span id="question-count" style="font-size:12px; font-weight:500; color:#5f6368">Q 1/10</span>
            <span id="mode-badge" class="badge">MODE</span>
        </div>

        <h2 id="question-text">Question Text</h2>
        <span id="multi-select-hint" class="multi-hint hidden">Select 2 options</span>
        
        <div id="options-list"></div>

        <div style="margin-top: 15px;">
            <button id="confirm-btn" class="btn-primary hidden" onclick="confirmAnswer()">Confirm Answer</button>
        </div>

        <div id="feedback-area" class="feedback hidden">
            <div style="font-weight: 500; margin-bottom: 4px;">Correct Answer</div>
            <span id="explanation-text"></span>
        </div>

        <div style="margin-top: 24px; text-align: right;">
            <button id="next-btn" class="btn-primary hidden" onclick="nextQuestion()">Next Question</button>
        </div>
    </div>

    <div id="results-screen" class="card hidden" style="text-align: center;">
        <div style="font-size: 48px; font-weight: 300; color: var(--primary);" id="final-score">0%</div>
        <h2>Session Complete</h2>
        <p id="pass-fail-msg">Result message</p>
        <button class="btn-primary" onclick="goHome()">Return to Dashboard</button>
    </div>

</div>

  <script>

// ==========================================
    // DATA: ALL QUESTIONS
    // ==========================================
    const questions = [
        // --- Quiz 1: Account setup ---
        {
            id: 1, category: "directory",
            text: "What is the essential first step to activate and use Google Workspace services for your domain?",
            options: [
                "Purchase a service-based license for your organization.", 
                "Configure MX records to point to Google.", 
                "Verify that you own the domain you want to associate with Google Workspace.", 
                "Provide Google with proof of identity."
            ],
            correctIndex: 2,
            explanation: "Domain verification is required to prove ownership before activating services."
        },
        {
            id: 2, category: "directory",
            text: "In the Google Workspace admin console, which section allows you to manage two-step verification and passwords?",
            options: ["Directory", "Account", "Security", "Rules"],
            correctIndex: 2,
            explanation: "Password policies and 2SV settings are found under the Security section."
        },
        {
            id: 3, category: "directory",
            text: "What are two types of information commonly found in DNS records? (Select 2)",
            options: [
                "Domain-based Message Authentication Protocols", 
                "DomainKeys Identified Mail", 
                "Mail Exchanger Records (MX)", 
                "Lightweight Directory Access Protocols", 
                "A Sender Policy Framework (SPF)"
            ],
            correctIndex: [2, 4],
            explanation: "MX records handle email routing, and SPF records authorize email senders."
        },

        // --- Quiz 2: User account provisioning ---
        {
            id: 4, category: "directory",
            text: "Every user is assigned to a structure when their user account is created. What is the name of this structure?",
            options: ["A target audience", "A structured resource", "An organizational unit", "A Google group"],
            correctIndex: 2,
            explanation: "Users are always placed within an Organizational Unit (OU) upon creation."
        },
        {
            id: 5, category: "directory",
            text: "What happens when a user is provisioned in Google Workspace?",
            options: [
                "Access is automatically granted to all Google Workspace services.", 
                "Predefined administrator roles are granted to the user’s account.", 
                "A Workspace account is added for the user.", 
                "The Google Workspace admin transfers company data into the user’s account."
            ],
            correctIndex: 2,
            explanation: "Provisioning simply means the account is created; roles and data transfer are separate steps."
        },
        {
            id: 6, category: "directory",
            text: "A company with 5,000 employees is transitioning to Google Workspace. They need a solution to automatically create/update user accounts based on existing on-premises Microsoft Active Directory. Which service can be used?",
            options: ["Google Cloud Directory Sync (GCDS)", "Data Migration Service", "Directory Sync", "Google Cloud Identity Platform"],
            correctIndex: 0,
            explanation: "GCDS is the standard tool for one-way synchronization from Active Directory to Google Workspace."
        },
        {
            id: 7, category: "directory",
            text: "What two pieces of information are mandatory to include when provisioning multiple users at once? (Select 2)",
            options: ["Password", "Access management level", "Organizational unit path", "Job title", "DNS records"],
            correctIndex: [0, 2],
            explanation: "Bulk uploads require a Password and the Organizational Unit Path to create the user correctly."
        },

        // --- Quiz 3: Organizational structures ---
        {
            id: 8, category: "directory",
            text: "Your company prohibits sales team members (except directors) from using Gemini. How do you configure OUs efficiently?",
            options: [
                "Create an OU for members who need Gemini and a separate OU for the rest.", 
                "Put all sales in one OU (Gemini OFF), place directors in a Configuration Group.", 
                "Put all sales in one OU (Gemini OFF), place directors in a separate Access Group (Gemini ON).", 
                "Put sales in one OU (Gemini OFF), place directors in a child OU (Gemini ON)."
            ],
            correctIndex: 2,
            explanation: "Access Groups are the recommended way to override service settings for specific users within the same OU."
        },
        {
            id: 9, category: "directory",
            text: "You are the admin for a school district. Staff require different settings per school, but students are the same everywhere. How should you organize accounts?",
            options: [
                "Create separate OUs for 'students' and 'staff', then create child OUs for each school under these.", 
                "Create separate OUs for 'students' and 'staff', then create child OUs for each school under the 'staff' OU.", 
                "Create a single OU for the entire district.", 
                "Create separate OUs for each school, then create child OUs for 'staff' and 'students' inside."
            ],
            correctIndex: 1,
            explanation: "This structure allows global settings for students and localized settings for staff."
        },

        // --- Quiz 4: Manage users ---
        {
            id: 10, category: "directory",
            text: "An employee will work in a prohibited region for one month. How do you restrict access without losing data or licenses?",
            options: [
                "Archive the user’s account and unarchive it when they return.", 
                "Delete the user’s account and create a new account when they return.", 
                "Suspend the user’s account and restore it when they return.", 
                "Delete the user’s account and restore it when they return."
            ],
            correctIndex: 2,
            explanation: "Suspension temporarily blocks access while preserving all data and licenses."
        },
        {
            id: 11, category: "directory",
            text: "When a user account is deleted, select two types of information that can be transferred. (Select 2)",
            options: ["User contacts", "Items in the user’s trash", "User calendar events", "A Google Maps file", "An email address"],
            correctIndex: [2, 4],
            explanation: "You can transfer Calendar data and re-assign the email address (as an alias) during deletion."
        },
        {
            id: 12, category: "directory",
            text: "You're a Workspace administrator for a company that plans to purchase user-based subscriptions for both Google Workspace and Gemini Alpha. Only executives need access to Gemini Alpha, while all other employees require permanent access to Google Workspace. How can you configure user licenses to meet these needs?",
            options: [
                "Automatically assign a Google Workspace license to every user in your organization, create a Google Group for executives, and assign Gemini Alpha licenses to the executives’ group only.", 
                "Create a Google Group for non-executive users and restrict access to Gemini Alpha for that group. All users will receive the default Google Workspace license.", 
                "Automatically assign a Google Workspace license to every user in your organization, create an organizational unit (OU) for executives, and assign Gemini Alpha licenses only to that OU.", 
                "Create an organizational unit (OU) for non-executive users and restrict access to Gemini Alpha for that OU. All users will receive the default Google Workspace license."
            ],
            correctIndex: 2,
            explanation: "Using an OU for executives makes license assignment clean and automatic based on hierarchy."
        },
        {
            id: 13, category: "directory",    
            text: "A Workspace administrator can modify certain attributes of a user's account. Select three. (Select 3)",
            options: [
                "Password strength monitoring", 
                "Calendar event data", 
                "Account creation date", 
                "Email alias", 
                "User profile photo", 
                "Recovery email address", 
                "Profile name in calendar invites"
            ],
            correctIndex: [0, 3, 6],
            explanation: "Admins can manage security attributes, aliases, and profile visibility settings."
        },
        {
            id: 14, category: "directory",
            text: "Which password setting can Workspace admins configure for their users?",
            options: [
                "Require a strong password for GCDS users.", 
                "Force password reset after 15 days.", 
                "Prevent password reuse for Google-managed accounts.", 
                "Require a strong password for SAML users."
            ],
            correctIndex: 2,
            explanation: "Admins can enforce history policies to prevent reusing old passwords."
        },

        // --- Quiz 5: Google Groups ---
        {
            id: 15, category: "directory",
            text: "You need to automatically add 'Marketing' employees to a group. How do you do this?",
            options: [
                "Manually add and remove employees.", 
                "Create a dynamic group with a membership rule based on the 'department' attribute.", 
                "Use a third-party application.", 
                "Create a static group and use a script."
            ],
            correctIndex: 1,
            explanation: "Dynamic groups automatically update membership based on directory attributes."
        },
        {
            id: 16, category: "directory",
            text: "How can you manage support@yourdomain so multiple agents can access it collaboratively?",
            options: [
                "Create a shared mailbox (Collaborative Inbox) for support@yourdomain.", 
                "Share account credentials.", 
                "Create aliases for each agent.", 
                "Set up an email distribution list."
            ],
            correctIndex: 0,
            explanation: "Collaborative Inboxes allow multiple users to manage a single email address securely."
        },

        // --- Quiz 6: Domain management ---
        {
            id: 17, category: "directory",
            text: "How can you simplify Drive collaboration with a partner company using Workspace?",
            options: [
                "Add their primary domain to allowed list.", 
                "Add to trusted domains.", 
                "Create a domain alias.", 
                "Add their primary domain, subdomains and any aliases to your list of trusted/allowed domains."
            ],
            correctIndex: 3,
            explanation: "Whitelisting the entire domain structure ensures all users from the partner company can collaborate."
        },
        {
            id: 18, category: "directory",
            text: "You purchased a company with its own domain and want them to keep receiving email there. What do you do?",
            options: [
                "Add as domain alias.", 
                "Add as subdomain.", 
                "Add the new domain as a secondary domain.", 
                "Create new account."
            ],
            correctIndex: 2,
            explanation: "A Secondary Domain allows a separate set of users to have their own distinct email addresses."
        },

        // --- Quiz 7: Shared resources management ---
        {
            id: 19, category: "directory",
            text: "How can you allow employees to book fitness equipment via Calendar?",
            options: [
                "Only meeting rooms allowed.", 
                "Create new resource.", 
                "Create the equipment as a feature in Calendar and associate it with the resource for the fitness center.", 
                "Assign to OU."
            ],
            correctIndex: 2,
            explanation: "Features allow you to tag resources (like a room) with specific attributes (like equipment)."
        },
        {
            id: 20, category: "directory",
            text: "How can you add 50 new buildings to Google Workspace efficiently? (Select 2)",
            options: [
                "Add via Admin SDK Directory API.", 
                "Add individually.", 
                "Import the office details in bulk using a CSV file.", 
                "Ask Gemini.", 
                "Use GCDS."
            ],
            correctIndex: [0, 2],
            explanation: "Bulk creation of buildings is supported via the API or CSV upload."
        },
        {
            id: 21, category: "directory",
            text: "What actions simplify booking resources for users? (Select 2)",
            options: [
                "Require approval.", 
                "Use a structured format for rooms.", 
                "Require admin access.", 
                "Attach to OUs.", 
                "Add the main work location for all users."
            ],
            correctIndex: [1, 4],
            explanation: "Structured resources and defined work locations help Calendar suggest the best rooms."
        },
        {
            id: 22, category: "directory",
            text: "You need to add 500 resources with fixed settings. How do you do it?",
            options: [
                "Use a CSV file to bulk upload.", 
                "Use API.", 
                "Use GCDS.", 
                "Add one by one."
            ],
            correctIndex: 0,
            explanation: "CSV upload is the most efficient method for bulk resource creation."
        },
        {
            id: 23, category: "directory",
            text: "You want to share a resource calendar with a group. Where do you go?",
            options: [
                "Groups page.", 
                "Manage resources page.", 
                "The Google Calendar page at calendar.google.com.", 
                "Google Groups homepage."
            ],
            correctIndex: 2,
            explanation: "Resource calendar sharing permissions are managed directly in the Calendar interface."
        },
    ];
      

    // --- APP LOGIC ---
    let currentMode = 'practice';
    let currentQuestions = [];
    let currentIdx = 0;
    let score = 0;
    let selectedIndices = []; // For multi-select

    // 1. Initialize Quiz
    function startQuiz(mode, category) {
        currentMode = mode;
        score = 0;
        currentIdx = 0;
        selectedIndices = [];

        // Filter Questions
        if (category === 'all') {
            currentQuestions = [...questions];
        } else {
            currentQuestions = questions.filter(q => q.category === category);
        }

        if (currentQuestions.length === 0) {
            alert("No questions found for this module yet!");
            return;
        }

        // Exam Mode: Shuffle & Slice 50
        if (mode === 'exam') {
            shuffleArray(currentQuestions);
            currentQuestions = currentQuestions.slice(0, 50);
        }

        // Setup UI
        document.getElementById('home-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        document.getElementById('results-screen').classList.add('hidden');
        
        let categoryName = category.toUpperCase();
        if (category === 'directory') categoryName = "USER & RESOURCE MGMT";
        
        const badge = document.getElementById('mode-badge');
        badge.innerText = mode === 'exam' ? 'EXAM SIMULATION' : `${categoryName}`;
        badge.className = `badge ${mode === 'exam' ? 'badge-exam' : 'badge-practice'}`;

        loadQuestion();
    }

    // 2. Load Question
    function loadQuestion() {
        const q = currentQuestions[currentIdx];
        selectedIndices = []; // Reset selection

        document.getElementById('question-count').innerText = `QUESTION ${currentIdx + 1} OF ${currentQuestions.length}`;
        document.getElementById('question-text').innerText = q.text;
        document.getElementById('feedback-area').classList.add('hidden');
        document.getElementById('next-btn').classList.add('hidden');
        document.getElementById('confirm-btn').classList.add('hidden');
        
        // Progress Bar
        const progress = ((currentIdx) / currentQuestions.length) * 100;
        document.getElementById('progress-bar').style.width = `${progress}%`;

        // Check if Multi-Select
        const isMulti = Array.isArray(q.correctIndex);
        const hint = document.getElementById('multi-select-hint');
        
        if (isMulti) {
            hint.classList.remove('hidden');
            hint.innerText = `(Select ${q.correctIndex.length} options)`;
            document.getElementById('confirm-btn').classList.remove('hidden'); // Show confirm button
        } else {
            hint.classList.add('hidden');
        }

        // Render Options
        const list = document.getElementById('options-list');
        list.innerHTML = '';
        
        q.options.forEach((opt, idx) => {
            const div = document.createElement('div');
            div.className = 'option-item';
            div.innerHTML = `<span style="margin-right:10px;">${isMulti ? '☐' : '○'}</span> ${opt}`;
            div.onclick = () => handleOptionClick(idx, div, isMulti);
            list.appendChild(div);
        });
    }

    // 3. Handle Click
    function handleOptionClick(idx, element, isMulti) {
        // If feedback is already shown, stop interaction
        if (!document.getElementById('feedback-area').classList.contains('hidden')) return;

        if (isMulti) {
            // Toggle selection
            if (selectedIndices.includes(idx)) {
                selectedIndices = selectedIndices.filter(i => i !== idx);
                element.classList.remove('selected');
                element.querySelector('span').innerText = '☐';
            } else {
                selectedIndices.push(idx);
                element.classList.add('selected');
                element.querySelector('span').innerText = '☑';
            }
        } else {
            // Single Select - Immediate Action
            selectSingleAnswer(idx, element);
        }
    }

    // 4. Handle Single Select Logic
    function selectSingleAnswer(idx, element) {
        const q = currentQuestions[currentIdx];
        const isCorrect = idx === q.correctIndex;
        const options = document.querySelectorAll('.option-item');

        // Disable clicks
        options.forEach(o => o.style.pointerEvents = 'none');

        if (isCorrect) score++;

        if (currentMode === 'practice') {
            if (isCorrect) {
                element.classList.add('correct');
                element.querySelector('span').innerText = '●';
            } else {
                element.classList.add('wrong');
                element.querySelector('span').innerText = '●';
                // Show correct
                options[q.correctIndex].classList.add('correct');
            }
            showFeedback(q);
        } else {
            element.classList.add('selected');
            document.getElementById('next-btn').classList.remove('hidden');
        }
    }

    // 5. Handle Multi Select Confirmation
    function confirmAnswer() {
        const q = currentQuestions[currentIdx];
        const options = document.querySelectorAll('.option-item');
        document.getElementById('confirm-btn').classList.add('hidden');
        
        // Sort arrays to compare
        const correctSorted = q.correctIndex.sort().toString();
        const selectedSorted = selectedIndices.sort().toString();
        const isCorrect = correctSorted === selectedSorted;

        if (isCorrect) score++;

        if (currentMode === 'practice') {
            options.forEach((opt, idx) => {
                const isSelected = selectedIndices.includes(idx);
                const isActuallyCorrect = q.correctIndex.includes(idx);

                if (isSelected && isActuallyCorrect) {
                    opt.classList.add('correct'); // Correctly picked
                } else if (isSelected && !isActuallyCorrect) {
                    opt.classList.add('wrong'); // Wrongly picked
                } else if (!isSelected && isActuallyCorrect) {
                    opt.classList.add('missed'); // Correct but missed
                }
            });
            showFeedback(q);
        } else {
            // Exam Mode: Just show Next
            document.getElementById('next-btn').classList.remove('hidden');
        }
    }

    function showFeedback(q) {
        // Build correct answer text
        let answerText = "";
        if (Array.isArray(q.correctIndex)) {
            answerText = q.correctIndex.map(i => q.options[i]).join("<br>AND<br>");
        } else {
            answerText = q.options[q.correctIndex];
        }

        document.getElementById('explanation-text').innerHTML = `${answerText}<br><br><em>${q.explanation}</em>`;
        document.getElementById('feedback-area').classList.remove('hidden');
        document.getElementById('next-btn').classList.remove('hidden');
    }

    function nextQuestion() {
        currentIdx++;
        if (currentIdx < currentQuestions.length) {
            loadQuestion();
        } else {
            showResults();
        }
    }

    function showResults() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('results-screen').classList.remove('hidden');
        
        const percent = Math.round((score / currentQuestions.length) * 100);
        document.getElementById('final-score').innerText = `${percent}%`;
        
        const msg = document.getElementById('pass-fail-msg');
        if (percent >= 80) {
            msg.innerHTML = "Passed!";
            msg.style.color = "var(--success)";
        } else {
            msg.innerHTML = "Review needed.";
            msg.style.color = "var(--error)";
        }
    }

    function goHome() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('results-screen').classList.add('hidden');
        document.getElementById('home-screen').classList.remove('hidden');
        score = 0;
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }
</script>

</body>
</html>





